{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\james\\\\OneDrive\\\\Documents\\\\GitHub\\\\Group-11\\\\frontend\\\\src\\\\components\\\\Orders.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport api from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OrdersPage() {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [returningItemId, setReturningItemId] = useState(null);\n  useEffect(() => {\n    async function fetchOrders() {\n      try {\n        const response = await api.get('/orders/history', {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        console.log('Fetched orders:', response.data);\n        setOrders(response.data);\n      } catch (error) {\n        console.error('Error fetching orders:', error);\n      }\n    }\n    fetchOrders();\n  }, []);\n  async function handleReturn(itemId) {\n    try {\n      const response = await api.put(`/orders/item/${itemId}/return`, {}, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('authToken')}`\n        }\n      });\n      if (response.status === 200) {\n        setReturningItemId(itemId);\n        setOrders(prevOrders => prevOrders.map(order => {\n          const items = order.items.map(item => {\n            if (item._id === itemId) {\n              return {\n                ...item,\n                status: \"returned\"\n              };\n            } else {\n              return item;\n            }\n          });\n          return {\n            ...order,\n            items\n          };\n        }));\n      } else {\n        console.error('Failed to return item:', response.status);\n      }\n    } catch (error) {\n      console.error('Error returning item:', error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), orders.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No orders found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this) : orders.map(order => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Order ID: \", order._id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Total Price: $\", order.totalPrice.toFixed(2)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Status: \", order.status]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Quantity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: order.items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: item.quantity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: [\"$\", item.price.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 21\n            }, this)]\n          }, item.product._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this), order.status === 'completed' && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleReturn(order._id),\n        children: \"Return Order\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }, this)]\n    }, order._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }, this)), returningItemId && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Product returned.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n_s(OrdersPage, \"XwZbPQ8bjqLW0ERj8Bt1v3pmAUo=\");\n_c = OrdersPage;\nexport default OrdersPage;\nvar _c;\n$RefreshReg$(_c, \"OrdersPage\");","map":{"version":3,"names":["useState","useEffect","api","jsxDEV","_jsxDEV","OrdersPage","_s","orders","setOrders","returningItemId","setReturningItemId","fetchOrders","response","get","headers","Authorization","localStorage","getItem","console","log","data","error","handleReturn","itemId","put","status","prevOrders","map","order","items","item","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","length","totalPrice","toFixed","product","name","quantity","price","onClick","_c","$RefreshReg$"],"sources":["C:/Users/james/OneDrive/Documents/GitHub/Group-11/frontend/src/components/Orders.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport api from '../api';\r\n\r\nfunction OrdersPage() {\r\n  const [orders, setOrders] = useState([]);\r\n  const [returningItemId, setReturningItemId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchOrders() {\r\n      try {\r\n        const response = await api.get('/orders/history', {\r\n          headers: {\r\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`,\r\n          },\r\n        });\r\n        console.log('Fetched orders:', response.data);\r\n        setOrders(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching orders:', error);\r\n      }\r\n    }\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  async function handleReturn(itemId) {\r\n    try {\r\n      const response = await api.put(`/orders/item/${itemId}/return`, {}, {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem('authToken')}`,\r\n        },\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        setReturningItemId(itemId);\r\n\r\n        setOrders((prevOrders) =>\r\n          prevOrders.map((order) => {\r\n            const items = order.items.map((item) => {\r\n              if (item._id === itemId) {\r\n                return { ...item, status: \"returned\" };\r\n              } else {\r\n                return item;\r\n              }\r\n            });\r\n            return { ...order, items };\r\n          })\r\n        );\r\n      } else {\r\n        console.error('Failed to return item:', response.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error returning item:', error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Orders</h1>\r\n      {orders.length === 0 ? (\r\n        <p>No orders found.</p>\r\n      ) : (\r\n        orders.map(order => (\r\n          <div key={order._id}>\r\n            <h2>Order ID: {order._id}</h2>\r\n            <h3>Total Price: ${order.totalPrice.toFixed(2)}</h3>\r\n            <p>Status: {order.status}</p>\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>Product</th>\r\n                  <th>Quantity</th>\r\n                  <th>Price</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {order.items.map(item => (\r\n                  <tr key={item.product._id}>\r\n                    <td>{item.product.name}</td>\r\n                    <td>{item.quantity}</td>\r\n                    <td>${item.price.toFixed(2)}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            {order.status === 'completed' && (\r\n              <button onClick={() => handleReturn(order._id)}>Return Order</button>\r\n            )}\r\n          </div>\r\n        ))\r\n      )}\r\n      {returningItemId && <p>Product returned.</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrdersPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}